"use strict";var blogvy=blogvy||{};function blogvyDomReady(e){if("function"==typeof e){if("interactive"===document.readyState||"complete"===document.readyState)return e();document.addEventListener("DOMContentLoaded",e,!1)}}blogvy.traverseMenu={init:function(){let e=document.querySelector(".blogvy-top-nav"),t=document.getElementById("site-navigation");e&&this.traverse(e),t&&this.traverse(t)},traverse:function(e){let t=e.getElementsByTagName("ul")[0];if(void 0!==t){t.classList.contains("nav-menu")||t.classList.add("nav-menu");let o=t.getElementsByTagName("a"),l=t.querySelectorAll(".menu-item-has-children > a, .page_item_has_children > a");for(let i of o)i.addEventListener("focus",this.toggleFocus,!0),i.addEventListener("blur",this.toggleFocus,!0);for(let a of l)a.addEventListener("touchstart",this.toggleFocus,!1)}},toggleFocus:function(e){if("focus"===e.type||"blur"===e.type){let t=this;for(;!t.classList.contains("nav-menu");)"li"===t.tagName.toLowerCase()&&t.classList.toggle("focus"),t=t.parentNode}if("touchstart"===e.type){let o=this.parentNode;for(let l of(e.preventDefault(),o.parentNode.children))o!==l&&l.classList.remove("focus");o.classList.toggle("focus")}}},blogvy.handleFocus={init:function(){this.keepFocusInModal()},keepFocusInModal:function(){let e=document.querySelectorAll(".blogvy-canvas-modal");document.addEventListener("keydown",function(t){("Tab"===t.key||9===t.keyCode)&&e&&e.forEach(function(e){let o=e.querySelectorAll('a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="search"]:not([disabled]), input[type="submit"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled]), [tabindex]:not([tabindex="-1"])'),l=o[0],i=o[o.length-1];t.shiftKey?document.activeElement===l&&(i.focus(),t.preventDefault()):document.activeElement===i&&(l.focus(),t.preventDefault())})})}},blogvy.fadeOutPreloader={init:function(){let e=document.querySelector("#blogvy-preloader-wrapper");e&&(e.classList.add("fadeOut"),setTimeout(function(){e.style.display="none"},1e3))}},blogvy.scrollToTop={init:function(){let e=document.documentElement,t=this,o=document.querySelectorAll(".blogvy-toggle-scroll-top");o&&o.forEach(function(o){t.goToTop(o,e)});let l=document.querySelectorAll(".blogvy-floating-scroll-top");l&&l.forEach(function(o){t.scrollToTopPosition(o,e)})},goToTop:function(e,t){e.addEventListener("click",function(e){e.preventDefault(),t.scrollTo({top:0,behavior:"smooth"})})},scrollToTopPosition:function(e,t){window.addEventListener("scroll",function(o){let l=t.scrollHeight-t.clientHeight;t.scrollTop/l>.4?e.classList.add("visible"):e.classList.remove("visible")})}},blogvy.stickyMenu={init:function(){let e=document.querySelector(".blogvy-primary-bar-row.sticky-menu");if(e&&e.className.includes("sticky-style-normal")){let t=e.offsetTop+e.clientHeight+100;window.addEventListener("scroll",function(o){let l=window.scrollY;if(l<=e.offsetTop||0===l){e.classList.remove("has-menu-sticked"),e.classList.remove("sticky-menu-translate-up");return}l>e.offsetTop&&(e.classList.add("sticky-menu-translate-up"),e.classList.remove("has-menu-sticked")),l>t&&(e.classList.remove("sticky-menu-translate-up"),e.classList.add("has-menu-sticked"))})}}},blogvy.subMenuToggle={init:function(){let e=document.querySelectorAll(".sub-menu-toggle");e&&e.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),this.classList.toggle("active"),this.setAttribute("aria-selected",`${"true"!==this.getAttribute("aria-selected")}`);let t=this.getAttribute("data-toggle-target");t&&document.querySelector(t).classList.toggle("active")})})}},blogvy.CanvasModal={init:function(){document.querySelector(".toggle-canvas-modal")&&(this.onOpen(),this.onClose(),this.outsideModal(),this.closeOnEscape())},onOpen:function(){document.querySelectorAll(".toggle-canvas-modal").forEach(function(e){e.addEventListener("click",function(t){t.preventDefault(),document.body.classList.add("canvas-modal-is-open"),document.body.classList.add(this.getAttribute("data-body-class")),e.classList.add("active"),e.setAttribute("aria-expanded",!0);let o=this.getAttribute("data-focus");o&&setTimeout(function(){document.querySelector(o).focus()},500)})})},onClose:function(){document.querySelectorAll(".close-canvas-modal").forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault(),this.hideModal()}).bind(this))}).bind(this))},outsideModal:function(){document.addEventListener("click",(function(e){if(document.body.classList.contains("canvas-modal-is-open")){let t=document.querySelector("#page.site");e.target==t&&this.hideModal()}}).bind(this))},closeOnEscape:function(){document.addEventListener("keydown",(function(e){"Escape"===e.key&&(e.preventDefault(),this.hideModal())}).bind(this))},hideModal:function(){document.body.classList.remove("canvas-modal-is-open");let e=document.querySelector(".toggle-canvas-modal.active");if(e){document.body.classList.remove(e.getAttribute("data-body-class"));let t=e.getAttribute("data-focus");t&&document.querySelector(t).blur(),e.setAttribute("aria-expanded",!1),e.focus(),e.classList.remove("active")}}},blogvy.SearchBlock={isToggled:!1,init:function(){document.querySelector(".toggle-search-block")&&(this.toggleSearchBlock(),this.closeOnEscape())},toggleSearchBlock:function(){let e=this;document.querySelectorAll(".toggle-search-block").forEach(function(t){t.addEventListener("click",function(o){if(o.preventDefault(),e.isToggled=!e.isToggled,e.isToggled){document.body.classList.add("search-block-is-open"),document.body.classList.add(this.getAttribute("data-body-class")),t.classList.add("active"),t.parentNode.classList.add("active"),t.setAttribute("aria-expanded",!0);let l=this.getAttribute("data-focus");l&&setTimeout(function(){t.parentNode.querySelector(l).focus()},500),setTimeout(function(){e.outsideBlock()},100)}else e.hideBlock()})})},closeOnEscape:function(){let e=this;document.addEventListener("keydown",function(t){"Escape"===t.key&&(t.preventDefault(),e.hideBlock())})},outsideBlock:function(){document.addEventListener("click",this.handleClickOutsideBox)},handleClickOutsideBox:function(e){document.body.classList.contains("search-block-is-open")&&(document.querySelector(".blogvy-search-toggle.active .em-search-form-inner").contains(e.target)||blogvy.SearchBlock.hideBlock())},hideBlock:function(){let e=this;document.body.classList.remove("search-block-is-open");let t=document.querySelector(".toggle-search-block.active");if(t){document.body.classList.remove(t.getAttribute("data-body-class"));let o=t.getAttribute("data-focus");o&&t.parentNode.querySelector(o).blur(),t.setAttribute("aria-expanded",!1),t.focus(),t.classList.remove("active"),t.parentNode.classList.remove("active"),document.removeEventListener("click",e.handleClickOutsideBox),e.isToggled=!1}}},blogvy.setBackgroundImage={init:function(){let e=document.querySelectorAll(".blogvy-bg-image");e&&e.forEach(function(e){let t=e.querySelector("img");if(t){let o=t.getAttribute("src");o&&(e.style.backgroundImage="url("+o+")",t.style.display="none")}})}},blogvy.progressBar={init:function(){let e=document.getElementById("blogvy-progress-bar");if(e){let t=document.body,o=document.documentElement;window.addEventListener("scroll",function(l){let i=t.scrollTop||o.scrollTop,a=o.scrollHeight-o.clientHeight;e.style.width=i/a*100+"%"})}}},blogvy.slider={init:function(){this.tickerSlider(),this.bannerSlider(),this.widgetSlider()},tickerSlider:function(){let e=document.querySelector(".blogvy-ticker-slider-wrapper");if(e){let t,o=e.getAttribute("data-slider")||{};o&&(t=JSON.parse(o)),new Swiper(e,t)}},bannerSlider:function(){let e=document.querySelector(".blogvy-banner-wrapper");if(e){let t,o=e.getAttribute("data-banner")||{};o&&(t=JSON.parse(o));let l={loop:!0,...t};new Swiper(e,l)}},widgetSlider:function(){let e=document.querySelectorAll(".blogvy-slider-wrapper-block .swiper");e&&e.forEach(function(e){let t=e.parentNode,o=t.querySelector(".swiper-button-next"),l=t.querySelector(".swiper-button-prev"),i=t.querySelector(".swiper-pagination"),a=e.getAttribute("data-slider")||{};if(a)var s=JSON.parse(a);let n={slidesPerView:1,lazyloading:!0,navigation:{nextEl:o,prevEl:l},pagination:{el:i,clickable:!0},...s},r=new Swiper(e,n);e.clientWidth<500&&(r.params.slidesPerView=1,r.update())})}},blogvy.tabs={init:function(){let e=document.querySelectorAll("[data-toggle='uf-tab']");e&&e.forEach(function(e){e.addEventListener("click",function(t){t.preventDefault();let o=[...e.parentNode.children],l=[...e.parentNode.nextElementSibling.children,];o.forEach(e=>{e.classList.remove("active"),e.setAttribute("aria-selected","false")}),l.forEach(e=>{e.classList.remove("active")});let i=e.getAttribute("aria-controls"),a=document.getElementById(i);e.classList.add("active"),e.setAttribute("aria-selected","true"),a.classList.add("active")})})}},blogvy.displayTime={init:function(){let e=document.querySelector(".blogvy-components-time");if(e){let t=JSON.parse(e.getAttribute("data-settings"));if(t){let o=Intl.DateTimeFormat().resolvedOptions().timeZone;t.timeZone=o,setInterval(function(){var o=new Date().toLocaleTimeString("en-US",t);e.innerHTML=o},1e3)}}}},blogvy.loadPosts={canBeLoaded:!0,currentPage:0,nextPage:0,maxPage:0,template:"",loadButton:"",loader:"",postsListsWrapper:"",loadType:"",init:function(){let e=document.querySelector(".blogvy-load-posts-btn-wrapper");if(e){let t=this;t.currentPage=parseInt(e.getAttribute("data-page")),t.nextPage=t.currentPage+1,t.maxPage=parseInt(e.getAttribute("data-max-pages")),t.template=e.closest("#primary").getAttribute("data-template"),t.loadButton=document.querySelector(".blogvy-ajax-load-btn"),t.loader=document.querySelector(".blogvy-ajax-loader"),t.postsListsWrapper=document.querySelector(".blogvy-posts-lists"),t.loadType=e.getAttribute("data-load-type"),t.loadType||(t.loadType="button_click_load"),"button_click_load"==t.loadType&&t.loadButton.addEventListener("click",function(e){e.preventDefault(),t.canBeLoaded&&t.fetchThePosts()}),"infinite_scroll_load"==t.loadType&&(e.style.opacity=.7,window.addEventListener("scroll",function(o){let l=e.getBoundingClientRect().top-window.innerHeight<=400;t.nextPage<=t.maxPage&&l&&t.canBeLoaded&&t.fetchThePosts()}))}},fetchThePosts:function(){let e=this;e.canBeLoaded=!1,e.loadButton.classList.add("loading-posts"),e.loader.classList.add("active");let t={action:"blogvy_load_posts",load_post_nonce:BlogvyVars.load_post_nonce,query_vars:BlogvyVars.query_vars,page:e.nextPage,template:e.template};fetch(BlogvyVars.ajaxurl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(t)}).then(e=>e.json()).then(t=>{if(t.success){let o=t.data.content.join("");blogvy.createElementsFromString(o).forEach(t=>{t.classList.add("animatefadeIn"),e.postsListsWrapper.appendChild(t)}),e.currentPage=e.nextPage,e.nextPage++,e.canBeLoaded=!0,e.nextPage<=e.maxPage?(e.loadButton.classList.remove("loading-posts"),e.loader.classList.remove("active")):document.querySelector(".blogvy-load-posts-btn-wrapper").style.display="none",document.body.dispatchEvent(new Event("posts-loaded"))}else e.loadButton.classList.remove("loading-posts"),e.loader.classList.remove("active")}).catch(t=>{console.error("Error during fetch:",t),e.loadButton.classList.remove("loading-posts"),e.loader.classList.remove("active")})}},blogvy.createElementsFromString=function(e){let t=new DOMParser,o=t.parseFromString(e,"text/html");return Array.from(o.body.children)},blogvyDomReady(function(){blogvy.stickyMenu.init(),blogvy.subMenuToggle.init(),blogvy.traverseMenu.init(),blogvy.handleFocus.init(),blogvy.CanvasModal.init(),blogvy.SearchBlock.init(),blogvy.scrollToTop.init(),blogvy.setBackgroundImage.init(),blogvy.progressBar.init(),blogvy.slider.init(),blogvy.tabs.init(),blogvy.displayTime.init(),blogvy.loadPosts.init()}),window.addEventListener("load",function(e){blogvy.fadeOutPreloader.init()});